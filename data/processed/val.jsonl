{"input": {"mode": "design_schema", "natural_language_task": "Design schema for BookWise: books, users, reviews, with multi-tenant.", "preferences": {"supabase_style": true, "naming": "snake_case", "id_type": "uuid", "multi_tenant": true}}, "output": {"actions": ["create_tables", "create_indexes", "create_rls"], "migrations": [{"filename": "001_create_books.sql", "sql": "CREATE TABLE books (id UUID PRIMARY KEY, title TEXT, tenant_id UUID); CREATE TABLE users (id UUID PRIMARY KEY, email TEXT UNIQUE); CREATE TABLE reviews (id UUID PRIMARY KEY, book_id UUID REFERENCES books, user_id UUID REFERENCES users, rating INTEGER, tenant_id UUID);"}], "rls_policies": [{"on_table": "books", "policy_name": "tenant_books", "sql": "CREATE POLICY tenant_books ON books FOR ALL USING (tenant_id IN (SELECT tenant_id FROM users WHERE id = auth.uid()));"}], "indexes": [{"sql": "CREATE INDEX ON reviews(book_id);"}], "queries": [], "error_explanations": [], "explanations": ["Included tenant_id in tables for multi-tenancy."], "safe_to_execute": true}}
